[root@tool test]# sh diff-faux-ad.sh 
FAUXPILOT: http://10.200.101.5:30080/v2/completions
AD: http://172.16.254.5:32080/v1/completions
AUTH: Authorization: Bearer eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJCVS1HUWZvdjk5WnBXckhYbjRGMlZ3U1hXMzBqbTNaY3JFRFVEM1BiaGhBIn0.eyJleHAiOjE3MjkwNDcyMTAsImlhdCI6MTcyOTA0NjAxMCwiYXV0aF90aW1lIjoxNzI5MDQwMTI5LCJqdGkiOiI3NjBlZTBmMC1iY2E0LTQ0MWEtOWI0Yi05MTdlNWRjNDgwODkiLCJpc3MiOiJodHRwczovL3pnc20uc2FuZ2Zvci5jb20vcmVhbG1zL2d3IiwiYXVkIjoiYWNjb3VudCIsInN1YiI6ImNjNDE1ZDY5LWQxMDktNGMzMy04Mjk0LWMzMTBlODk3Zjc0MCIsInR5cCI6IkJlYXJlciIsImF6cCI6InZzY29kZSIsInNlc3Npb25fc3RhdGUiOiJiYjRiZDk3OS1mZWRkLTQ2M2UtODI3ZC1lNDZkZmE4Y2UwMmMiLCJhY3IiOiIwIiwiYWxsb3dlZC1vcmlnaW5zIjpbImh0dHBzOi8vemdzbS5zYW5nZm9yLmNvbSJdLCJyZWFsbV9hY2Nlc3MiOnsicm9sZXMiOlsib2ZmbGluZV9hY2Nlc3MiLCJ1bWFfYXV0aG9yaXphdGlvbiIsImRlZmF1bHQtcm9sZXMtZ3ciXX0sInJlc291cmNlX2FjY2VzcyI6eyJhY2NvdW50Ijp7InJvbGVzIjpbIm1hbmFnZS1hY2NvdW50IiwibWFuYWdlLWFjY291bnQtbGlua3MiLCJ2aWV3LXByb2ZpbGUiXX19LCJzY29wZSI6Im9wZW5pZCBwaG9uZSBlbWFpbCBwcm9maWxlIiwic2lkIjoiYmI0YmQ5NzktZmVkZC00NjNlLTgyN2QtZTQ2ZGZhOGNlMDJjIiwiZW1haWxfdmVyaWZpZWQiOmZhbHNlLCJwaG9uZV9udW1iZXJfdmVyaWZpZWQiOnRydWUsInBob25lX251bWJlciI6Iis4NjEzODI0MzY2MTkyIiwicHJlZmVycmVkX3VzZXJuYW1lIjoiKzg2MTM4MjQzNjYxOTIifQ.0tbErFjqRX7t--BeJp4Xei454HKc75MNd59mX4p269LYfTvAwKYgz09sXte1WP92WKDeVBLBqVP-Z6aHaAoXfWWHmIVjj5-J34Z5vNWgXUwjTLJlz8DjcUd_VKFPBlhzgwhNjYKEMmjIQxSSV7EZ9pzr8uz_TpljA5RVjNsdj-Ac1VyAAqwp5oMR8cEcEez-1iWS02xH8XZlequRZDexgF5aDAyBjpSglTwstKlWLofz5982hOhf810RDT_16IH3HAp6E91XZyFhfEddRC2C8ori3aQthj-XlXLylN5Hvv_YkcaJQ7to7exOSWpZM_lM7MSJY2zfm81Amp4yxwMcpQ
DATA: {
  "model": "DeepSeek-Coder-V2-Lite-Base",
  "prompt": "#!/usr/bin/env python\n# coding: utf-8\nimport requests\ndef trace(rsp):\n    print"
}
FAUXPILOT: ----------------------------------------------------------------
HTTP/1.1 200 OK
Content-Type: application/json
Content-Length: 114
Connection: keep-alive
X-RateLimit-Limit: 10000
X-RateLimit-Remaining: 9953
X-RateLimit-Reset: 42725
date: Wed, 16 Oct 2024 02:44:08 GMT
Server: APISIX/3.9.1

"{\"id\": \"cmpl-yUbhXwCB0iuGifwQkMRlJ18uHGGvG\", \"choices\": [], \"server_extra_kwargs\": {\"is_cache\": true}}"
real    0m0.013s
user    0m0.002s
sys     0m0.003s
AD: -----------------------------------------------------------------------
HTTP/1.1 200 OK
date: Wed, 16 Oct 2024 02:46:00 GMT
server: uvicorn
content-length: 336
content-type: application/json

{"id":"cmpl-66fa972f9fbc4f2781796a273a60c3c7","object":"text_completion","created":1729046760,"model":"DeepSeek-Coder-V2-Lite-Base","choices":[{"index":0,"text":"(rsp.status_code)\n    print(rsp.headers","logprobs":null,"finish_reason":"length","stop_reason":null}],"usage":{"prompt_tokens":28,"total_tokens":44,"completion_tokens":16}}
real    0m0.404s
user    0m0.001s
sys     0m0.005s
-------------------------------------------------------------------------
curl -i http://172.16.254.5:32326/v1/completions -H Content-Type: application/json -X POST -d {
  "model": "DeepSeek-Coder-V2-Lite-Base",
  "prompt": "#!/usr/bin/env python\n# coding: utf-8\nimport requests\ndef trace(rsp):\n    print"
}
HTTP/1.1 200 OK
date: Wed, 16 Oct 2024 02:46:00 GMT
server: uvicorn
content-length: 334
content-type: application/json

{"id":"cmpl-93e134d9bbee43ae9d1c587fdc514f2a","object":"text_completion","created":1729046761,"model":"DeepSeek-Coder-V2-Lite-Base","choices":[{"index":0,"text":" 'rsp', rsp\n\ndef stack_vm(inputs):\n","logprobs":null,"finish_reason":"length","stop_reason":null}],"usage":{"prompt_tokens":28,"total_tokens":44,"completion_tokens":16}}
real    0m0.212s
user    0m0.002s
sys     0m0.004s
-------------------------------------------------------------------------
curl -i http://172.16.254.5:32329/v1/completions -H Content-Type: application/json -X POST -d {
  "model": "DeepSeek-Coder-V2-Lite-Base",
  "prompt": "#!/usr/bin/env python\n# coding: utf-8\nimport requests\ndef trace(rsp):\n    print"
}
HTTP/1.1 200 OK
date: Wed, 16 Oct 2024 02:46:00 GMT
server: uvicorn
content-length: 333
content-type: application/json

{"id":"cmpl-0c6562d2db3f4477a1bdfb0e0d856d8a","object":"text_completion","created":1729046761,"model":"DeepSeek-Coder-V2-Lite-Base","choices":[{"index":0,"text":"(rsp.text.encode('utf-8'))\ndef test_","logprobs":null,"finish_reason":"length","stop_reason":null}],"usage":{"prompt_tokens":28,"total_tokens":44,"completion_tokens":16}}
real    0m0.262s
user    0m0.000s
sys     0m0.006s